"use strict";angular.module("musicConciergeApp",["ngAnimate","ngCookies","ngResource","ngRoute","ngSanitize","ngTouch","ui.sortable"]).config(["$routeProvider",function(a){a.when("/",{templateUrl:"views/main.html",controller:"MainCtrl"}).when("/about",{templateUrl:"views/about.html",controller:"AboutCtrl"}).otherwise({redirectTo:"/"})}]);var model={user:"Beni Cheni",LAST_FM_API_END_POINT:"http://ws.audioscrobbler.com/2.0/",API_KEY:"f8f9d955b4b26d87955d54e5ac984857",DATA_FORMAT:"json",apiMethod:"",wordGameAnswer:""};angular.module("musicConciergeApp").controller("MainCtrl",["$scope","$http","$templateCache",function(a,b,c){a.favAlbum=model,a.answer="",a.checkAnswer=function(){a.answer===a.wordGameAlbum.name&&($("#correctAnswer").css("display","block"),a.answer="")},a.resetWordGameQ=function(){""!==a.wordGameAlbum?($("#shuffledWordHolder").css("display","none"),$("#wordGameDiv").css("display","inline"),a.wordGameQ=a.wordGameAlbum.name.shuffle()):""===a.wordGameAlbum&&($("#wordGameDiv").css("display","none"),$("#shuffledWordHolder").css("display","inline"),a.wordGameQ="")},a.groovyOnLastfm=function(){a.method="GET",model.apiMethod="artist.gettopalbums",a.url=model.LAST_FM_API_END_POINT+"?method="+model.apiMethod+"&artist="+a.artist+"&api_key="+model.API_KEY+"&format="+model.DATA_FORMAT,a.code=null,a.response=null,b({method:a.method,url:a.url,cache:c}).success(function(b,c){return a.status=c,$("#noTotal").css("display","none"),$("#error").css("display","none"),$(".result").css("display","none"),b.hasOwnProperty("topalbums")&&!b.topalbums.hasOwnProperty("total")?($(".results").css("display","block"),a.data=b,a.wordGameAlbum=b.topalbums.album.randomPick(),void a.resetWordGameQ(1)):b.hasOwnProperty("topalbums")?(b.topalbums.hasOwnProperty("total")&&"0"===b.topalbums.total&&$("#noTotal").css("display","block"),a.wordGameAlbum="",void a.resetWordGameQ()):b.hasOwnProperty("error")?($("#error").css("display","block"),a.error=b.error,a.message=b.message,a.wordGameAlbum="",void a.resetWordGameQ()):void 0}).error(function(b,c){a.data=b||"Request failed",a.status=c})}}]),angular.module("musicConciergeApp").controller("AboutCtrl",["$scope",function(a){a.awesomeThings=["HTML5 Boilerplate","AngularJS","Karma"]}]),String.prototype.shuffle=function(){for(var a=this.split(""),b=a.length-1;b>0;b--){var c=Math.floor(Math.random()*(b+1)),d=a[b];a[b]=a[c],a[c]=d}return a.join("")},Array.prototype.randomPick=function(){return this[Math.floor(Math.random()*this.length)]};